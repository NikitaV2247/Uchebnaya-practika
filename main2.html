<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransportCo - Транспортная компания</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            font-family: 'Open Sans', sans-serif;
            color: #333;
        }
        
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Система уведомлений */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }
        
        .notification {
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: slideIn 0.3s ease-out;
            transform: translateX(0);
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }
        
        .notification.hiding {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .notification-success {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }
        
        .notification-error {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }
        
        .notification-warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            color: #856404;
        }
        
        .notification-info {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            color: #0c5460;
        }
        
        .notification-content {
            flex: 1;
            margin-right: 15px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: inherit;
            opacity: 0.7;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: opacity 0.2s;
        }
        
        .notification-close:hover {
            opacity: 1;
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Шапка сайта */
        header {
            background: white;
            border-bottom: 1px solid #e0e0e0;
            padding: 15px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
            flex-shrink: 0;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            font-weight: bold;
            color: #0047AB;
            text-decoration: none;
            cursor: pointer;
        }
        
        nav {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        nav a {
            color: #333;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
            cursor: pointer;
        }
        
        nav a:hover {
            color: #0047AB;
        }
        
        nav a.active {
            color: #0047AB;
            font-weight: 600;
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn-login, .btn-register, .btn-order {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .btn-login {
            border: 2px solid #0047AB;
            color: #0047AB;
            background: white;
        }
        
        .btn-login:hover {
            background: #0047AB;
            color: white;
        }
        
        .btn-register {
            border: 2px solid #0047AB;
            background: #0047AB;
            color: white;
        }
        
        .btn-register:hover {
            background: #003580;
        }
        
        .btn-order {
            border: 2px solid #F49B00;
            background: #F49B00;
            color: white;
        }
        
        .btn-order:hover {
            background: #d88800;
        }
        
        /* Основной контент */
        #content {
            flex: 1;
            transition: opacity 0.3s;
            display: flex;
            flex-direction: column;
        }
        
        .page-content {
            display: none;
            flex: 1;
        }
        
        .page-content.active {
            display: flex;
            flex-direction: column;
        }
        
        /* Подвал */
        footer {
            background: #0047AB;
            color: white;
            text-align: center;
            padding: 30px 40px;
            flex-shrink: 0;
            margin-top: auto;
        }
        
        footer p {
            font-size: 14px;
        }
        
        /* Стили главной страницы */
        .call {
            background: linear-gradient(135deg, #0047AB 0%, #003580 100%);
            color: white;
            padding: 80px 40px;
            text-align: left;
        }
        
        .call-content {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .call h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .call p {
            font-size: 16px;
            margin-bottom: 30px;
            max-width: 600px;
            line-height: 1.6;
        }
        
        .features {
            padding: 60px 40px;
        }
        
        .features-content {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .features h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 36px;
            text-align: center;
            margin-bottom: 50px;
            color: #333;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            text-align: center;
            transition: box-shadow 0.3s;
        }
        
        .feature-card:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .feature-card h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .feature-card p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
        
        .stats {
            background: linear-gradient(135deg, #0047AB 0%, #003580 100%);
            color: white;
            padding: 60px 40px;
            flex-shrink: 0;
            margin-top: auto;
        }
        
        .stats-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            text-align: center;
        }
        
        .stat-item h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .stat-item p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* Стили для заголовков страниц */
        .page-header {
            background: linear-gradient(135deg, #0047AB 0%, #003580 100%);
            color: white;
            padding: 60px 40px;
        }
        
        .page-header-content {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }
        
        .page-header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 42px;
            margin-bottom: 10px;
        }
        
        .page-header p {
            font-size: 16px;
        }
        
        /* Контейнер контента */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 40px;
            flex: 1 0 auto;
        }
        
        /* Стили "О компании" */
        .about-section {
            margin-bottom: 50px;
        }
        
        .about-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 32px;
            color: #0047AB;
            margin-bottom: 20px;
        }
        
        .about-section p {
            font-size: 16px;
            line-height: 1.8;
            color: #666;
            margin-bottom: 15px;
        }
        
        .timeline {
            margin-top: 30px;
        }
        
        .timeline-item {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid #F49B00;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }
        
        .timeline-year {
            font-family: 'Montserrat', sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: #0047AB;
            min-width: 80px;
            padding: 8px 12px;
            border-radius: 4px;
            text-align: center;
        }
        
        .timeline-content {
            flex: 1;
        }
        
        .timeline-content h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            color: #0047AB;
            margin-bottom: 10px;
        }
        
        .timeline-content p {
            font-size: 14px;
            color: #666;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(275px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .value-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid #F49B00;
        }

        .value-card h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            color: #0047AB;
            margin-bottom: 10px;
        }

        .value-card p {
            font-size: 14px;
            color: #666;
        }
        
        /* Стили "Контакты" */
        .upper-section {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 60px;
            margin-bottom: 60px;
        }
        
        .contact-section, .map-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            height: fit-content;
        }
        
        .contact-section h2, .map-container h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 28px;
            margin-bottom: 25px;
            color: #0047AB;
        }
        
        .contact-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .contact-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .contact-item h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            color: #F49B00;
            margin-bottom: 8px;
        }
        
        .contact-item p {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .map-placeholder {
            height: 500px;
            width: 100%;
            background: #e9ecef;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 18px;
        }
        
        .lower-section {
            margin: 0 -20px;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .contact-form h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 28px;
            margin-bottom: 25px;
            color: #0047AB;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Open Sans', sans-serif;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0047AB;
            box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.1);
        }
        
        .contact-submit-btn {
            width: 100%;
            padding: 12px;
            background-color: #F49B00;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            transition: background-color 0.3s;
        }
        
        .contact-submit-btn:hover {
            background-color: #003580;
        }
        
        /* Стили формы заказа */
        .order-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 40px;
            flex: 1 0 auto;
        }
        
        .important-notice {
            background: #FFF9F0;
            border: 1px solid #F49B00;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 40px;
        }
        
        .important-notice p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
        
        .form-section {
            margin-bottom: 40px;
        }
        
        .form-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            color: #0047AB;
            margin-bottom: 20px;
        }
        
        .order-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .order-form-group {
            margin-bottom: 20px;
        }
        
        .order-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .required:after {
            content: " *";
            color: #e74c3c;
        }
        
        .order-form-group input,
        .order-form-group textarea,
        .order-form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Open Sans', sans-serif;
        }
        
        .order-form-group input:focus,
        .order-form-group textarea:focus,
        .order-form-group select:focus {
            outline: none;
            border-color: #0047AB;
            box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.1);
        }
        
        /* Стили для ошибок в форме заказа */
        .order-error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        
        .order-error-message.show {
            display: block;
        }
        
        .order-form-group input.error,
        .order-form-group textarea.error,
        .order-form-group select.error {
            border-color: #e74c3c;
            background-color: #fff9f9;
        }
        
        .order-divider {
            height: 1px;
            background: #e0e0e0;
            margin: 30px 0;
        }
        
        .weight-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .weight-input input {
            flex: 1;
        }
        
        .weight-input span {
            font-size: 14px;
            color: #666;
        }
        
        .volume-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .volume-input input {
            flex: 1;
        }
        
        .volume-input span {
            font-size: 14px;
            color: #666;
        }
        
        .weight-volume-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .checkbox-group {
            margin-bottom: 15px;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .order-submit-btn {
            width: 100%;
            padding: 15px;
            background-color: #F49B00;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            transition: background-color 0.3s;
        }
        
        .order-submit-btn:hover {
            background-color: #d88800;
        }
        
        /* Стили для модальных окон */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .auth-container {
            width: 100%;
            max-width: 450px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
        }
        
        .auth-header {
            color: rgb(0, 0, 0);
            padding: 25px 20px 15px;
            text-align: center;
            position: relative;
        }
        
        .close-auth-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            transition: background-color 0.3s;
            color: #000;
            background: none;
            border: none;
        }
        
        .close-auth-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .auth-logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            color: #0047AB;
        }
        
        .auth-subtitle {
            font-size: 16px;
            opacity: 0.8;
        }
        
        .auth-form-container {
            padding: 25px 30px;
        }
        
        .auth-input-group {
            margin-bottom: 20px;
        }
        
        .auth-input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .auth-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .auth-input::placeholder {
            color: #999;
            font-size: 14px;
        }
        
        .auth-input:focus {
            border-color: #0047AB;
            outline: none;
        }
        
        /* Стили для ошибок */
        .auth-input.error {
            border-color: #e74c3c;
            background-color: #fff9f9;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        /* ОБЩИЙ отступ для строки с чекбоксом и ссылкой - УМЕНЬШЕН для авторизации */
        .auth-options-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        /* Увеличиваем отступ для формы регистрации */
        #registerModal .auth-options-row {
            margin: 25px 0;
        }
        
        .auth-checkbox-container {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 5px 0;
            margin-bottom: 30px;
        }
        
        .auth-custom-checkbox {
            position: relative;
            width: 20px;
            height: 20px;
            border: 2px solid #0047AB;
            border-radius: 4px;
            margin-right: 8px;
            flex-shrink: 0;
            transition: background-color 0.3s;
        }
        
        .auth-checkbox-container input {
            display: none;
        }
        
        .auth-checkmark {
            position: absolute;
            top: 1px;
            left: 5px;
            width: 6px;
            height: 12px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .auth-checkbox-container input:checked + .auth-custom-checkbox {
            background-color: #0047AB;
        }
        
        .auth-checkbox-container input:checked + .auth-custom-checkbox .auth-checkmark {
            opacity: 1;
        }
        
        .auth-checkbox-text {
            font-size: 14px;
            color: #555;
        }
        
        /* Ссылка "Забыли пароль" в авторизации */
        .auth-forgot-password {
            font-size: 14px;
            color: #0047AB;
            text-decoration: none;
            cursor: pointer;
            padding: 5px 0;
            transition: color 0.3s;
            text-align: right;
        }
        
        .auth-forgot-password:hover {
            text-decoration: underline;
        }
        
        /* Убираем большой отступ снизу у чекбокса в авторизации */
        #loginModal .auth-checkbox-container {
            margin-bottom: 10px;
        }
        
        .auth-btn {
            width: 100%;
            padding: 14px;
            background: #0047AB;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }
        
        /* Кнопка входа с меньшим отступом сверху */
        #loginModal .auth-btn {
            margin-top: 5px;
        }
        
        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .register-btn {
            background: #F49B00;
        }
        
        .auth-link {
            text-align: center;
            font-size: 15px;
            color: #555;
            margin-top: 15px;
        }
        
        .auth-link a {
            color: #0047AB;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }
        
        .auth-link a:hover {
            text-decoration: underline;
        }
        
        .auth-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .auth-row .auth-input-group {
            flex: 1;
        }
        
        /* Стили для модальных окон восстановления пароля */
        .forgot-password-info {
            text-align: center;
            margin: 15px 0 25px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .sms-code-info {
            text-align: center;
            margin: 10px 0 25px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .sms-code-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .sms-code-input input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .sms-code-input input:focus {
            border-color: #0047AB;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.1);
        }
        
        .sms-timer {
            text-align: center;
            margin: 15px 0;
            color: #F49B00;
            font-size: 14px;
            font-weight: 600;
        }
        
        .resend-code {
            text-align: center;
            margin-top: 15px;
        }
        
        .resend-code a {
            color: #0047AB;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
        }
        
        .resend-code a:hover {
            text-decoration: underline;
        }
        
        .resend-code.disabled a {
            color: #999;
            cursor: not-allowed;
        }
        
        .resend-code.disabled a:hover {
            text-decoration: none;
        }
        
        .divider {
            height: 1px;
            background: #e0e0e0;
            margin: 25px 0;
        }
        
        /* Стили для кнопок в модальных окнах восстановления */
        .forgot-password-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .back-btn {
            flex: 1;
            padding: 14px;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .back-btn:hover {
            background: #f5f5f5;
            border-color: #bbb;
        }
        
        .recovery-btn {
            flex: 1;
            padding: 14px;
            background: #0047AB;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .recovery-btn:hover {
            background: #003580;
        }
        
        /* Стили для кнопок в окне подтверждения кода */
        .confirm-code-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }
        
        /* Растягиваем обе кнопки на всю ширину */
        .confirm-code-buttons .back-btn,
        .confirm-code-buttons .continue-btn {
            width: 100%;
            text-align: center;
        }
        
        .continue-btn {
            padding: 14px;
            background: #0047AB;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .continue-btn:hover {
            background: #003580;
        }
        
        /* Стили для страницы "Профиль" */
        .profile-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }

        .profile-nav-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            position: relative;
            font-family: 'Montserrat', sans-serif;
            transition: color 0.3s;
        }

        .profile-nav-btn:hover {
            color: #0047AB;
        }

        .profile-nav-btn.active {
            color: #0047AB;
        }

        .profile-nav-btn.active:after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 0;
            right: 0;
            height: 2px;
            background: #0047AB;
        }

        .profile-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin-bottom: 30px;
        }

        .profile-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            color: #0047AB;
            margin-bottom: 20px;
        }

        .profile-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            color: #333;
            margin: 25px 0 15px;
        }

        .profile-tab {
            display: block;
        }

        .profile-tab-content {
            width: 100%;
        }
        
        /* Стили для полей профиля только для чтения */
        .profile-field-readonly {
            border: none;
            background: transparent;
            box-shadow: none;
            pointer-events: none;
            color: #333;
            padding-left: 0;
            font-size: 16px;
            font-weight: 600;
            font-family: 'Open Sans', sans-serif;
        }
        
        .profile-field-readonly::placeholder {
            color: #333;
        }

        /* Стили для страницы "Мои заказы" в профиле */
        .filters-section {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }

        .filter-group select,
        .filter-group input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'Open Sans', sans-serif;
            height: 40px;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #0047AB;
            box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.1);
        }

        .reset-group {
            display: flex;
            justify-content: flex-end;
        }

        .reset-btn {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            height: 40px;
        }

        .reset-btn:hover {
            background: #e9ecef;
            border-color: #bbb;
        }

        /* Статистика */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #0047AB;
            margin-bottom: 5px;
            font-family: 'Montserrat', sans-serif;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        /* Таблица заказов */
        .orders-table-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
            margin-bottom: 40px;
            display: none;
        }

        .table-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1.5fr 1.5fr 1fr 1fr 1fr 1.5fr;
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e0e0e0;
            font-weight: 600;
            color: #333;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .table-header-item {
            padding: 0 10px;
            text-align: left;
        }

        .order-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1.5fr 1.5fr 1fr 1fr 1fr 1.5fr;
            padding: 20px 20px;
            border-bottom: 1px solid #f0f0f0;
            align-items: center;
            min-height: 80px;
        }

        .order-row:last-child {
            border-bottom: none;
        }

        .order-cell {
            padding: 0 10px;
            text-align: left;
        }

        .order-id {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .order-id-text {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        /* Стили для правильного переноса слов в таблице */
        .date-container {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .date-day {
            font-size: 14px;
            color: #333;
            line-height: 1.2;
        }

        .date-year {
            font-size: 12px;
            color: #666;
            line-height: 1.2;
        }

        .address-container {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .address-line {
            font-size: 14px;
            color: #333;
            line-height: 1.2;
        }

        .cargo-text {
            font-size: 14px;
            color: #333;
            line-height: 1.4;
        }

        .order-status-cell {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .order-status {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            width: fit-content;
        }

        .order-status.delivered {
            background: #d4edda;
            color: #155724;
        }

        .order-status.delivered .status-icon {
            color: #28a745;
            font-size: 10px;
        }

        .order-status.in-transit {
            background: #fff3cd;
            color: #856404;
        }

        .order-status.in-transit .status-icon {
            color: #ffc107;
            font-size: 10px;
        }

        .order-status.processing {
            background: #cce5ff;
            color: #004085;
        }

        .order-status.processing .status-icon {
            color: #007bff;
            font-size: 10px;
        }

        .order-status.new {
            background: #e2e3e5;
            color: #383d41;
        }

        .order-status.new .status-icon {
            color: #6c757d;
            font-size: 10px;
        }

        .order-status.confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .order-status.confirmed .status-icon {
            color: #17a2b8;
            font-size: 10px;
        }

        .order-status.cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .order-status.cancelled .status-icon {
            color: #dc3545;
            font-size: 10px;
        }

        .order-price-cell {
            display: flex;
            flex-direction: column;
        }

        .order-price {
            font-size: 16px;
            font-weight: 700;
            color: #0047AB;
            font-family: 'Montserrat', sans-serif;
        }

        .order-actions-cell {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
        }

        .actions-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
            width: 100%;
        }

        .order-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .view-btn, .track-btn {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
            border: 1px solid;
            width: 100%;
            text-align: center;
        }

        .view-btn {
            background: white;
            border-color: #0047AB;
            color: #0047AB;
        }

        .view-btn:hover {
            background: #0047AB;
            color: white;
        }

        .track-btn {
            background: #0047AB;
            border-color: #0047AB;
            color: white;
        }

        .track-btn:hover {
            background: #003580;
            border-color: #003580;
        }

        /* Сообщение при отсутствии заказов */
        .no-orders-container {
            background: white;
            border-radius: 8px;
            padding: 60px 40px;
            text-align: center;
            border: 1px solid #e0e0e0;
            display: block;
        }

        .no-orders-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .no-orders-container h3 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
            font-family: 'Montserrat', sans-serif;
        }

        .no-orders-container p {
            color: #666;
            margin-bottom: 30px;
        }
        
        /* Адаптивность */
        @media (max-width: 1200px) {
            .table-header {
                grid-template-columns: 1fr 1fr 1.2fr 1.2fr 0.8fr 0.8fr 0.8fr 1.2fr;
            }
            
            .order-row {
                grid-template-columns: 1fr 1fr 1.2fr 1.2fr 0.8fr 0.8fr 0.8fr 1.2fr;
            }
        }
        
        @media (max-width: 1024px) {
            .filter-row {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .table-header {
                grid-template-columns: 1fr 1fr 1.2fr 1.2fr;
            }
            
            .order-row {
                grid-template-columns: 1fr 1fr 1.2fr 1.2fr;
            }
            
            /* Скрываем некоторые колонки на планшетах */
            .table-header-item:nth-child(5),
            .table-header-item:nth-child(6),
            .table-header-item:nth-child(7),
            .table-header-item:nth-child(8) {
                display: none;
            }
            
            .order-cargo,
            .order-status-cell,
            .order-price-cell,
            .order-actions-cell {
                display: none;
            }
            
            /* Для планшетов делаем кнопки в строку */
            .order-buttons {
                flex-direction: row;
            }
            
            .view-btn, .track-btn {
                width: auto;
                min-width: 100px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .upper-section {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .order-form-row, .weight-volume-row {
                grid-template-columns: 1fr;
            }
            
            .auth-row {
                flex-direction: column;
                gap: 0;
            }
            
            .auth-options-row {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                gap: 10px;
                flex-wrap: nowrap;
            }
            
            .auth-form-container {
                padding: 20px;
            }
            
            .forgot-password-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .sms-code-input {
                gap: 8px;
            }
            
            .sms-code-input input {
                width: 45px;
                height: 55px;
                font-size: 20px;
            }
            
            .filter-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .table-header {
                display: none;
            }
            
            .order-row {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 20px;
                border-bottom: 2px solid #f0f0f0;
                position: relative;
            }
            
            .order-cell {
                padding: 0;
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                text-align: right;
            }
            
            .order-cell:before {
                content: attr(data-label);
                font-weight: 600;
                color: #666;
                font-size: 12px;
                text-transform: uppercase;
                margin-right: 10px;
                text-align: left;
                flex: 0 0 100px;
            }
            
            .order-id-text {
                font-size: 16px;
            }
            
            .order-cargo,
            .order-status-cell,
            .order-price-cell,
            .order-actions-cell {
                display: flex;
            }
            
            .date-container,
            .address-container {
                text-align: right;
                align-items: flex-end;
            }
            
            .date-day,
            .date-year,
            .address-line,
            .cargo-text {
                text-align: right;
            }
            
            .order-actions-cell {
                flex-direction: column;
                align-items: stretch;
                margin-top: 15px;
                padding-top: 15px;
                border-top: 1px dashed #e0e0e0;
            }
            
            .actions-container {
                width: 100%;
            }
            
            .order-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .view-btn, .track-btn {
                width: 100%;
                text-align: center;
                padding: 10px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            header, .call, .features, .stats, .page-header, .container, .order-container {
                padding-left: 20px;
                padding-right: 20px;
            }
            
            .call h1 {
                font-size: 36px;
            }
            
            .features h2, .section-title, .page-header h1 {
                font-size: 28px;
            }
            
            .auth-options-row {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                gap: 5px;
            }
            
            .auth-checkbox-text {
                font-size: 12px;
                white-space: nowrap;
            }
            
            /* Исправления для placeholder в мобильной версии */
            .auth-input {
                font-size: 14px;
            }
            
            .auth-input::placeholder {
                font-size: 12px;
            }
            
            .sms-code-input input {
                width: 40px;
                height: 50px;
                font-size: 18px;
            }
            
            .order-cell:before {
                flex: 0 0 80px;
                font-size: 11px;
            }
            
            .profile-nav-btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            /* Уведомления на мобильных */
            .notification-container {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
            
            .notification {
                padding: 12px 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Контейнер для уведомлений -->
    <div class="notification-container" id="notificationContainer"></div>
    
    <!-- Шапка сайта -->
    <header>
        <div class="header-content">
            <div class="logo" onclick="showPage('main')">TransportCo</div>
            <nav>
                <a onclick="showPage('main')" class="active">Главная</a>
                <a onclick="showPage('about')">О компании</a>
                <a onclick="showPage('contacts')">Контакты</a>
            </nav>
            <div class="auth-buttons">
                <div id="unauth-buttons" style="display: flex; gap: 10px;">
                    <button class="btn-login" onclick="openLoginModal()">Вход</button>
                    <button class="btn-register" onclick="openRegisterModal()">Регистрация</button>
                </div>
                <div id="auth-user-buttons" style="display: none; gap: 10px;">
                    <button class="btn-order" onclick="showPage('profile')">Профиль</button>
                    <button class="btn-login" onclick="logout()">Выйти</button>
                </div>
                <button class="btn-order" onclick="showPage('order')">Заказать перевозку</button>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <div id="content">
        <!-- Главная страница -->
        <div id="main-page" class="page-content active">
            <section class="call">
                <div class="call-content">
                    <h1>Надежная доставка грузов</h1>
                    <p>Профессиональная транспортная компания с опытом более 10 лет. Быстрая и безопасная доставка по всему региону.</p>
                    <button class="btn-order" onclick="showPage('order')">Заказать перевозку</button>
                </div>
            </section>
            
            <section class="features">
                <div class="features-content">
                    <h2>Почему выбирают нас</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">🚚</div>
                            <h3>Современный парк</h3>
                            <p>Новые автомобили с GPS-отслеживанием и кондиционированием</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">⏱️</div>
                            <h3>Быстрая доставка</h3>
                            <p>Оптимальные маршруты и своевременное прибытие гарантированы</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">🔒</div>
                            <h3>Безопасность</h3>
                            <p>Страховка груза и профессиональные водители с лицензиями</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">📍</div>
                            <h3>Везде доступны</h3>
                            <p>Доставка в любую точку региона и соседние области</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="stats">
                <div class="stats-content">
                    <div class="stat-item">
                        <h3>10+</h3>
                        <p>Лет опыта</p>
                    </div>
                    <div class="stat-item">
                        <h3>500+</h3>
                        <p>Автомобилей</p>
                    </div>
                    <div class="stat-item">
                        <h3>50K+</h3>
                        <p>Доставок</p>
                    </div>
                    <div class="stat-item">
                        <h3>99%</h3>
                        <p>Довольных клиентов</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Страница "О компании" -->
        <div id="about-page" class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1>О компании TransportCo</h1>
                </div>
            </div>
            
            <div class="container">
                <div class="about-section">
                    <h2>Наша история</h2>
                    <p>TransportCo - это профессиональная транспортная компания с более чем 10-летним опытом работы на рынке логистики и грузоперевозок. Мы специализируемся на надежной и быстрой доставке грузов по всей стране.</p>
                    <p>Наша компания имеет собственный парк из более 500 автомобилей различных типов и грузоподъемности, что позволяет нам предложить решение для любых задач перевозки.</p>
                </div>
                
                <div class="about-section">
                    <h2>История развития</h2>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-year">2015</div>
                            <div class="timeline-content">
                                <h4>Основание компании</h4>
                                <p>TransportCo была основана как небольшая семейная компания с 5 автомобилями</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-year">2017</div>
                            <div class="timeline-content">
                                <h4>Расширение парка</h4>
                                <p>Увеличение парка до 50 автомобилей и открытие филиалов в соседних городах</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-year">2019</div>
                            <div class="timeline-content">
                                <h4>Внедрение GPS-мониторинга</h4>
                                <p>Установка систем GPS-отслеживания на все автомобили для лучшего контроля</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-year">2021</div>
                            <div class="timeline-content">
                                <h4>Достижение 500 автомобилей</h4>
                                <p>Парк компании достигает 500 единиц техники, обслуживая более 50 000 доставок в год</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-year">2023</div>
                            <div class="timeline-content">
                                <h4>Запуск онлайн-платформы</h4>
                                <p>Открытие веб-сайта и мобильного приложения для удобного заказа услуг</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="about-section">
                    <h2>Наши ценности</h2>
                    <div class="values-grid">
                        <div class="value-card">
                            <h3>Надежность</h3>
                            <p>Мы гарантируем своевременную доставку и полную сохранность вашего груза</p>
                        </div>
                        <div class="value-card">
                            <h3>Профессионализм</h3>
                            <p>Наша команда состоит из опытных специалистов и водителей с лицензиями</p>
                        </div>
                        <div class="value-card">
                            <h3>Инновация</h3>
                            <p>Мы используем современные технологии для отслеживания и управления перевозками</p>
                        </div>
                        <div class="value-card">
                            <h3>Клиентоориентированность</h3>
                            <p>Ваши потребности - наш приоритет. Мы готовы найти решение для любой задачи</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница "Контакты" -->
        <div id="contacts-page" class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1>Контакты</h1>
                </div>
            </div>
            
            <div class="container">
                <div class="upper-section">
                    <div class="contact-section">
                        <h2>Информация о компании</h2>
                        <div class="contact-item">
                            <h3>Адрес</h3>
                            <p>г. Кострома, ул. Титова, д.4</p>
                        </div>
                        <div class="contact-item">
                            <h3>Телефон</h3>
                            <p>+7 (812) 156-43-89</p>
                        </div>
                        <div class="contact-item">
                            <h3>Email</h3>
                            <p>info@transportco.ru</p>
                        </div>
                        <div class="contact-item">
                            <h3>Режим работы</h3>
                            <p>Пн-Пт: 5:00 - 20:00<br>Сб-Вс: Выходной</p>
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div class="map-placeholder">
                            Здесь будет карта
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница "Профиль" -->
        <div id="profile-page" class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1>Профиль</h1>
                    <p>Управление вашими данными и заказами</p>
                </div>
            </div>
            
            <div class="container">
                <!-- Навигация профиля -->
                <div class="profile-nav">
                    <button class="profile-nav-btn active" onclick="showProfileTab('data')">Данные</button>
                    <button class="profile-nav-btn" onclick="showProfileTab('orders')">Мои заказы</button>
                </div>
                
                <!-- Содержимое вкладок -->
                <div id="profile-tab-content" class="profile-tab-content">
                    <!-- Вкладка Данные -->
                    <div id="profile-data" class="profile-tab active">
                        <div class="profile-section">
                            <h2>Личные данные</h2>
                            <form id="profile-form" onsubmit="handleProfileSubmit(event)">
                                <div class="order-form-row">
                                    <div class="order-form-group">
                                        <label for="profile-first-name">Имя</label>
                                        <input type="text" id="profile-first-name" class="profile-field-readonly" placeholder="Иван" value="Иван" readonly>
                                    </div>
                                    <div class="order-form-group">
                                        <label for="profile-last-name">Фамилия</label>
                                        <input type="text" id="profile-last-name" class="profile-field-readonly" placeholder="Иванов" value="Иванов" readonly>
                                    </div>
                                </div>
                                
                                <div class="order-form-row">
                                    <div class="order-form-group">
                                        <label for="profile-email">Email</label>
                                        <input type="email" id="profile-email" class="profile-field-readonly" placeholder="your@email.com" value="ivan@example.com" readonly>
                                    </div>
                                    <div class="order-form-group">
                                        <label for="profile-phone">Телефон</label>
                                        <input type="tel" id="profile-phone" class="profile-field-readonly" placeholder="+7 (912) 156-43-89" value="+7 (912) 156-43-89" readonly>
                                    </div>
                                </div>
                                
                                <h3>Смена пароля</h3>
                                <div class="order-divider"></div>
                                
                                <div class="order-form-group">
                                    <label for="profile-current-password">Текущий пароль</label>
                                    <input type="password" id="profile-current-password" placeholder="Текущий пароль">
                                </div>
                                
                                <div class="order-form-row">
                                    <div class="order-form-group">
                                        <label for="profile-new-password">Новый пароль</label>
                                        <input type="password" id="profile-new-password" placeholder="Новый пароль">
                                    </div>
                                    <div class="order-form-group">
                                        <label for="profile-confirm-password">Подтвердите пароль</label>
                                        <input type="password" id="profile-confirm-password" placeholder="Подтвердите пароль">
                                    </div>
                                </div>
                                
                                <button type="submit" class="order-submit-btn">Сохранить изменения</button>
                            </form>
                        </div>
                        
                        <div class="profile-section">
                            <h2>Настройки уведомлений</h2>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" id="notify-email" checked>
                                    Уведомления по Email
                                </label>
                            </div>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" id="notify-sms" checked>
                                    Уведомления по SMS
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Вкладка Мои заказы -->
                    <div id="profile-orders" class="profile-tab" style="display: none;">
                        <!-- Фильтры и поиск -->
                        <div class="filters-section">
                            <div class="filter-row">
                                <div class="filter-group">
                                    <label for="profile-status-filter">Статус:</label>
                                    <select id="profile-status-filter">
                                        <option>Все заказы</option>
                                        <option>В обработке</option>
                                        <option>В пути</option>
                                        <option>Доставлен</option>
                                        <option>Отменен</option>
                                    </select>
                                </div>
                                
                                <div class="filter-group">
                                    <label for="profile-period-filter">Период:</label>
                                    <select id="profile-period-filter">
                                        <option>Все время</option>
                                        <option>За неделю</option>
                                        <option>За месяц</option>
                                        <option>За 3 месяца</option>
                                        <option>За год</option>
                                    </select>
                                </div>
                                
                                <div class="filter-group">
                                    <label for="profile-search-input">Поиск:</label>
                                    <input type="text" id="profile-search-input" placeholder="Номер заказа или адрес...">
                                </div>
                                
                                <div class="filter-group reset-group">
                                    <button class="reset-btn" onclick="resetProfileFilters()">Сбросить</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Статистика -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="profile-total-orders-count">0</div>
                                <div class="stat-label">Всего заказов</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number" id="profile-processing-orders-count">0</div>
                                <div class="stat-label">В обработке</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number" id="profile-in-transit-orders-count">0</div>
                                <div class="stat-label">В пути</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number" id="profile-delivered-orders-count">0</div>
                                <div class="stat-label">Доставлено</div>
                            </div>
                        </div>
                        
                        <!-- Таблица заказов -->
                        <div id="profile-orders-table" class="orders-table-container" style="display: none;">
                            <div class="table-header">
                                <div class="table-header-item">№ ЗАКАЗА</div>
                                <div class="table-header-item">ДАТА</div>
                                <div class="table-header-item">АДРЕС ОТПРАВЛЕНИЯ</div>
                                <div class="table-header-item">АДРЕС ДОСТАВКИ</div>
                                <div class="table-header-item">ГРУЗ</div>
                                <div class="table-header-item">СТАТУС</div>
                                <div class="table-header-item">ЦЕНА</div>
                                <div class="table-header-item">ДЕЙСТВИЯ</div>
                            </div>
                        </div>
                        
                        <!-- Сообщение при отсутствии заказов -->
                        <div id="profile-no-orders-message" class="no-orders-container" style="display: block;">
                            <div class="no-orders-icon">📦</div>
                            <h3>Заказов нет</h3>
                            <p>У вас пока нет оформленных заказов</p>
                            <button class="btn-order" onclick="showPage('order')">Сделать первый заказ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница "Заказ перевозки" -->
        <div id="order-page" class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1>Заказать перевозку</h1>
                </div>
            </div>
            
            <div class="order-container">
                <div class="important-notice">
                    <p><strong>Важно:</strong> Заполните все поля формы для оформления заказа. Наш менеджер свяжется с вами в течение 30 минут для подтверждения деталей.</p>
                </div>
                
                <form id="orderForm" onsubmit="handleOrderSubmit(event)">
                    <!-- Информация об отправителе -->
                    <div class="form-section">
                        <h2>Информация об отправителе</h2>

                        <div class="order-divider"></div>
                        
                        <div class="order-form-row">
                            <div class="order-form-group">
                                <label for="sender-name" class="required">Ваше имя</label>
                                <input type="text" id="sender-name" placeholder="Иван Иванов" required>
                                <div class="order-error-message" id="sender-name-error"></div>
                            </div>
                            
                            <div class="order-form-group">
                                <label for="sender-phone" class="required">Телефон</label>
                                <input type="tel" id="sender-phone" placeholder="+7 (912) 156-43-89" required>
                                <div class="order-error-message" id="sender-phone-error"></div>
                            </div>
                        </div>
                        
                        <div class="order-form-group">
                            <label for="sender-email">Email</label>
                            <input type="email" id="sender-email" placeholder="your@email.com">
                            <div class="order-error-message" id="sender-email-error"></div>
                        </div>
                    </div>
                    
                    <!-- Информация о грузе -->
                    <div class="form-section">
                        <h2>Информация о грузе</h2>

                        <div class="order-divider"></div>
                        
                        <div class="order-form-group">
                            <label for="cargo-description" class="required">Описание груза</label>
                            <textarea id="cargo-description" placeholder="Опишите груз, его характеристики и особенности упаковки" rows="3" required></textarea>
                            <div class="order-error-message" id="cargo-description-error"></div>
                        </div>
                        
                        <!-- Добавлено поле для категории товаров -->
                        <div class="order-form-group">
                            <label for="product-category" class="required">Категория товара</label>
                            <select id="product-category" required>
                                <option value="">Выберите категорию</option>
                                <option value="electronics">Электроника</option>
                                <option value="clothing">Одежда и обувь</option>
                                <option value="furniture">Мебель</option>
                                <option value="food">Продукты питания</option>
                                <option value="building">Строительные материалы</option>
                                <option value="auto">Автозапчасти</option>
                                <option value="industrial">Промышленное оборудование</option>
                                <option value="chemicals">Химические вещества</option>
                                <option value="documents">Документы</option>
                                <option value="other">Другое</option>
                            </select>
                            <div class="order-error-message" id="product-category-error"></div>
                        </div>
                        
                        <div class="order-form-group">
                            <label for="cargo-weight" class="required">Вес груза</label>
                            <div class="weight-input">
                                <input type="number" id="cargo-weight" placeholder="1" required>
                                <span>кг</span>
                            </div>
                            <div class="order-error-message" id="cargo-weight-error"></div>
                        </div>
                        
                        <div class="order-form-group">
                            <label for="cargo-volume" class="required">Объем</label>
                            <div class="volume-input">
                                <input type="number" id="cargo-volume" placeholder="1" required>
                                <span>м³</span>
                            </div>
                            <div class="order-error-message" id="cargo-volume-error"></div>
                        </div>
                        
                        <div class="order-form-row">
                            <div class="order-form-group">
                                <label for="cargo-type" class="required">Тип груза</label>
                                <select id="cargo-type" required>
                                    <option value="">Выберите тип груза</option>
                                    <option value="general">Общий груз</option>
                                    <option value="fragile">Хрупкий груз</option>
                                    <option value="dangerous">Опасный груз</option>
                                    <option value="perishable">Скоропортящийся груз</option>
                                </select>
                                <div class="order-error-message" id="cargo-type-error"></div>
                            </div>
                            
                            <div class="order-form-group">
                                <label for="shipping-date" class="required">Дата отправки</label>
                                <input type="date" id="shipping-date" required>
                                <div class="order-error-message" id="shipping-date-error"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Адреса доставки -->
                    <div class="form-section">
                        <h2>Адреса доставки</h2>

                        <div class="order-divider"></div>
                        
                        <div class="order-form-group">
                            <label for="pickup-address" class="required">Адрес отправки</label>
                            <input type="text" id="pickup-address" placeholder="Кострома, ул. Ленина, д. 10" required>
                            <div class="order-error-message" id="pickup-address-error"></div>
                        </div>
                        
                        <div class="order-form-group">
                            <label for="delivery-address" class="required">Адрес доставки</label>
                            <input type="text" id="delivery-address" placeholder="Москва, ул. Арбат, д. 5" required>
                            <div class="order-error-message" id="delivery-address-error"></div>
                        </div>
                    </div>
                    
                    <!-- Дополнительные услуги -->
                    <div class="form-section">
                        <h2>Дополнительные услуги</h2>

                        <div class="order-divider"></div>
                        
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="insurance">
                                Страховка груза (-5% от стоимости)
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="packaging">
                                Профессиональная упаковка (+2000 ₽)
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="tracking">
                                Отслеживание в реальном времени (бесплатно)
                            </label>
                        </div>
                    </div>
                    
                    <!-- Комментарии -->
                    <div class="form-section">
                        <h2>Комментарии</h2>
                        
                        <div class="order-form-group">
                            <textarea id="comments" placeholder="Дополнительная информация для менеджера..." rows="4"></textarea>
                        </div>
                    </div>
                    
                    <button type="submit" class="order-submit-btn">Оформить заказ</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Подвал сайта -->
    <footer>
        <p>&copy; 2025 TransportCo. Все права защищены.</p>
    </footer>

    <!-- Модальное окно авторизации -->
    <div id="loginModal" class="modal">
        <div class="auth-container">
            <div class="auth-header">
                <button class="close-auth-btn" onclick="closeLoginModal()">×</button>
                <div class="auth-logo">TransportCo</div>
                <div class="auth-subtitle">Вход в аккаунт</div>
            </div>
            
            <div class="auth-form-container">
                <div class="auth-input-group">
                    <label for="auth-login">Телефон или Email</label>
                    <input class="auth-input" type="text" id="auth-login" placeholder="+7 930 913 78 79 или your@email.com">
                    <div class="error-message" id="auth-login-error"></div>
                </div>
                
                <div class="auth-input-group">
                    <label for="auth-password">Пароль</label>
                    <input class="auth-input" type="password" id="auth-password" placeholder="......">
                    <div class="error-message" id="auth-password-error"></div>
                </div>
                
                <div class="auth-options-row">
                    <label class="auth-checkbox-container">
                        <input type="checkbox" id="auth-rememberMe">
                        <span class="auth-custom-checkbox">
                            <span class="auth-checkmark"></span>
                        </span>
                        <span class="auth-checkbox-text">Запомнить меня</span>
                    </label>
                    <a class="auth-forgot-password" onclick="openForgotPasswordModal()">Забыли пароль?</a>
                </div>
                
                <button class="auth-btn" onclick="handleLogin()">Войти</button>
                
                <div class="auth-link">
                    Нет аккаунта? <a onclick="switchToRegister()">Зарегистрироваться</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно регистрации -->
    <div id="registerModal" class="modal">
        <div class="auth-container">
            <div class="auth-header">
                <button class="close-auth-btn" onclick="closeRegisterModal()">×</button>
                <div class="auth-logo">TransportCo</div>
                <div class="auth-subtitle">Создание аккаунта</div>
            </div>
            
            <div class="auth-form-container">
                <div class="auth-row">
                    <div class="auth-input-group">
                        <label for="reg-firstName">Имя</label>
                        <input class="auth-input" type="text" id="reg-firstName" placeholder="Иван">
                        <div class="error-message" id="reg-firstName-error"></div>
                    </div>
                    <div class="auth-input-group">
                        <label for="reg-lastName">Фамилия</label>
                        <input class="auth-input" type="text" id="reg-lastName" placeholder="Иванов">
                        <div class="error-message" id="reg-lastName-error"></div>
                    </div>
                </div>
                
                <div class="auth-input-group">
                    <label for="reg-email">Email</label>
                    <input class="auth-input" type="email" id="reg-email" placeholder="your@email.com">
                    <div class="error-message" id="reg-email-error"></div>
                </div>
                
                <div class="auth-input-group">
                    <label for="reg-phone">Телефон</label>
                    <input class="auth-input" type="tel" id="reg-phone" placeholder="+7 (812) 156-43-89">
                    <div class="error-message" id="reg-phone-error"></div>
                </div>
                
                <div class="auth-input-group">
                    <label for="reg-password">Пароль</label>
                    <input class="auth-input" type="password" id="reg-password" placeholder="......">
                    <div class="error-message" id="reg-password-error"></div>
                </div>
                
                <div class="auth-input-group">
                    <label for="reg-confirmPassword">Подтвердить пароль</label>
                    <input class="auth-input" type="password" id="reg-confirmPassword" placeholder="......">
                    <div class="error-message" id="reg-confirmPassword-error"></div>
                </div>
                
                <label class="auth-checkbox-container">
                    <input type="checkbox" id="reg-agreeTerms">
                    <span class="auth-custom-checkbox">
                        <span class="auth-checkmark"></span>
                    </span>
                    <span class="auth-checkbox-text">Я согласен с условиями использования и политикой конфиденциальности.</span>
                </label>
                
                <button class="auth-btn register-btn" onclick="handleRegister()">Зарегистрироваться</button>
                
                <div class="auth-link">
                    Уже есть аккаунт? <a onclick="switchToLogin()">Войти</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения телефона при регистрации -->
    <div id="confirmRegisterCodeModal" class="modal">
        <div class="auth-container">
            <div class="auth-header">
                <button class="close-auth-btn" onclick="closeConfirmRegisterCodeModal()">×</button>
                <div class="auth-logo">TransportCo</div>
                <div class="auth-subtitle">Подтвердите телефон</div>
            </div>
            
            <div class="auth-form-container">
                <div class="sms-code-info">
                    На ваш телефон было отправлено<br>CМС-сообщение с кодом подтверждения.
                </div>
                
                <div class="auth-input-group">
                    <label for="reg-sms-code" style="text-align: center; display: block;">КОД ИЗ СМС</label>
                    <div class="sms-code-input">
                        <input type="text" id="reg-sms-code-1" maxlength="1" oninput="moveToNextRegister(1, event)">
                        <input type="text" id="reg-sms-code-2" maxlength="1" oninput="moveToNextRegister(2, event)">
                        <input type="text" id="reg-sms-code-3" maxlength="1" oninput="moveToNextRegister(3, event)">
                        <input type="text" id="reg-sms-code-4" maxlength="1" oninput="moveToNextRegister(4, event)">
                    </div>
                </div>
                
                <div class="sms-timer" id="reg-sms-timer">
                    Пожалуйста подождите... 59 сек
                </div>
                
                <div class="divider"></div>
                
                <div class="resend-code disabled" id="reg-resend-code">
                    Не приходит код? <a onclick="resendRegisterCode()">Отправить снова</a>
                </div>
                
                <div class="confirm-code-buttons">
                    <button class="continue-btn" onclick="verifyRegisterCode()">Подтвердить регистрацию</button>
                    <button class="back-btn" onclick="backToRegister()">Назад</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно восстановления пароля (шаг 1) -->
    <div id="forgotPasswordModal" class="modal">
        <div class="auth-container">
            <div class="auth-header">
                <button class="close-auth-btn" onclick="closeForgotPasswordModal()">×</button>
                <div class="auth-logo">TransportCo</div>
                <div class="auth-subtitle">Восстановление пароля</div>
            </div>
            
            <div class="auth-form-container">
                <div class="forgot-password-info">
                    Введите номер мобильного телефона или e-mail, который вы использовали при регистрации
                </div>
                
                <div class="auth-input-group">
                    <label for="recovery-contact">ТЕЛЕФОН ИЛИ E-MAIL</label>
                    <input class="auth-input" type="text" id="recovery-contact" placeholder="Номер мобильного телефона или e-mail*" required>
                </div>
                
                <div class="forgot-password-buttons">
                    <button class="back-btn" onclick="closeForgotPasswordModal()">Назад</button>
                    <button class="recovery-btn" onclick="sendRecoveryCode()">Восстановить пароль</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно подтверждения телефона (шаг 2) -->
    <div id="confirmCodeModal" class="modal">
        <div class="auth-container">
            <div class="auth-header">
                <button class="close-auth-btn" onclick="closeConfirmCodeModal()">×</button>
                <div class="auth-logo">TransportCo</div>
                <div class="auth-subtitle">Подтвердите телефон</div>
            </div>
            
            <div class="auth-form-container">
                <div class="sms-code-info">
                    На ваш телефон было отправлено<br>CМС-сообщение с кодом подтверждения.
                </div>
                
                <div class="auth-input-group">
                    <label for="sms-code" style="text-align: center; display: block;">КОД ИЗ СМС</label>
                    <div class="sms-code-input">
                        <input type="text" id="sms-code-1" maxlength="1" oninput="moveToNext(1, event)">
                        <input type="text" id="sms-code-2" maxlength="1" oninput="moveToNext(2, event)">
                        <input type="text" id="sms-code-3" maxlength="1" oninput="moveToNext(3, event)">
                        <input type="text" id="sms-code-4" maxlength="1" oninput="moveToNext(4, event)">
                    </div>
                </div>
                
                <div class="sms-timer" id="sms-timer">
                    Пожалуйста подождите... 59 сек
                </div>
                
                <div class="divider"></div>
                
                <div class="resend-code disabled" id="resend-code">
                    Не приходит код? <a onclick="resendCode()">Отправить снова</a>
                </div>
                
                <div class="confirm-code-buttons">
                    <button class="continue-btn" onclick="verifyCode()">Продолжить</button>
                    <button class="back-btn" onclick="backToForgotPassword()">Назад</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Локальное хранилище для пользователей (имитация базы данных)
        let users = JSON.parse(localStorage.getItem('transportco_users')) || [
            {
                id: 1,
                email: "test@example.com",
                phone: "+79123456789",
                password: "password123",
                firstName: "Иван",
                lastName: "Иванов",
                verified: true
            }
        ];
        
        // Текущий пользователь
        let currentUser = JSON.parse(localStorage.getItem('transportco_currentUser')) || null;
        
        // Заказы (имитация базы данных)
        let orders = JSON.parse(localStorage.getItem('transportco_orders')) || [];
        
        // Временные данные для регистрации
        let tempRegistrationData = null;
        
        // Переменная для запоминания страницы после авторизации
        let pendingPageAfterLogin = null;

        // Система уведомлений
        function showNotification(message, type = 'info', duration = 5000) {
            const container = document.getElementById('notificationContainer');
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            notification.innerHTML = `
                <div class="notification-content">${message}</div>
                <button class="notification-close" onclick="this.parentElement.remove()">×</button>
            `;
            
            container.appendChild(notification);
            
            // Автоматическое удаление через указанное время
            if (duration > 0) {
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.classList.add('hiding');
                        setTimeout(() => {
                            if (notification.parentElement) {
                                notification.remove();
                            }
                        }, 300);
                    }
                }, duration);
            }
            
            return notification;
        }
        
        // Функция для переключения страниц
        function showPage(pageId) {
            // Проверяем авторизацию для доступа к профилю и заказу
            if ((pageId === 'profile' || pageId === 'order') && !currentUser) {
                if (pageId === 'order') {
                    showNotification('Для оформления заказа необходимо войти в аккаунт', 'warning');
                    pendingPageAfterLogin = 'order'; // Запоминаем, куда перейти после входа
                } else {
                    showNotification('Для доступа к профилю необходимо авторизоваться', 'warning');
                    pendingPageAfterLogin = 'profile';
                }
                openLoginModal();
                return;
            }
            
            // Скрыть все страницы
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Показать выбранную страницу
            const pageElement = document.getElementById(pageId + '-page');
            if (pageElement) {
                pageElement.classList.add('active');
            }
            
            // Обновить активную ссылку в навигации
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.textContent === getPageName(pageId)) {
                    link.classList.add('active');
                }
            });
            
            // Прокрутить вверх
            window.scrollTo(0, 0);
            
            // Если показываем страницу профиля, показываем вкладку "Данные"
            if (pageId === 'profile') {
                showProfileTab('data');
            }
        }
        
        // Функция для получения названия страницы по ID
        function getPageName(pageId) {
            const pageNames = {
                'main': 'Главная',
                'about': 'О компании',
                'contacts': 'Контакты',
                'profile': 'Профиль',
                'order': 'Заказать перевозку'
            };
            
            return pageNames[pageId] || 'Главная';
        }
        
        // Функция переключения вкладок профиля
        function showProfileTab(tabName) {
            // Убираем активный класс у всех кнопок
            const navButtons = document.querySelectorAll('.profile-nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            
            // Добавляем активный класс нажатой кнопке
            document.querySelector(`.profile-nav-btn[onclick*="${tabName}"]`).classList.add('active');
            
            // Скрываем все вкладки
            const tabs = document.querySelectorAll('.profile-tab');
            tabs.forEach(tab => tab.style.display = 'none');
            
            // Показываем выбранную вкладку
            document.getElementById(`profile-${tabName}`).style.display = 'block';
            
            // Если открыли вкладку заказов, обновляем статистику
            if (tabName === 'orders') {
                updateProfileOrderStats();
            }
        }
        
        // Функция обновления статистики заказов в профиле
        function updateProfileOrderStats() {
            if (!currentUser) return;
            
            // Фильтруем заказы текущего пользователя
            const userOrders = orders.filter(order => order.userId === currentUser.id);
            
            // Обновляем статистику
            document.getElementById('profile-total-orders-count').textContent = userOrders.length;
            
            // Статусы "new", "confirmed" и "processing" теперь все "В обработке"
            const processingOrders = userOrders.filter(o => 
                o.status === 'new' || 
                o.status === 'confirmed' || 
                o.status === 'processing'
            ).length;
            
            document.getElementById('profile-processing-orders-count').textContent = processingOrders;
            document.getElementById('profile-in-transit-orders-count').textContent = userOrders.filter(o => o.status === 'in_transit').length;
            document.getElementById('profile-delivered-orders-count').textContent = userOrders.filter(o => o.status === 'delivered').length;
            
            // Загружаем заказы пользователя
            if (userOrders.length > 0) {
                displayUserOrders(userOrders);
                toggleOrdersVisibility(true);
            } else {
                toggleOrdersVisibility(false);
            }
        }
        
        // Функция отображения заказов пользователя
        function displayUserOrders(orders) {
            const ordersTable = document.getElementById('profile-orders-table');
            const tableBody = ordersTable.querySelector('tbody') || document.createElement('tbody');
            tableBody.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('div');
                row.className = 'order-row';
                
                // Форматирование даты
                const orderDate = new Date(order.createdAt);
                const formattedDate = orderDate.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric'
                });
                
                // Определение статуса
                const statusClass = getStatusClass(order.status);
                const statusText = getStatusText(order.status);
                
                row.innerHTML = `
                    <div class="order-cell order-id">
                        <span class="order-id-text">#${order.id}</span>
                    </div>
                    <div class="order-cell date-container">
                        <span class="date-day">${formattedDate}</span>
                    </div>
                    <div class="order-cell address-container">
                        <span class="address-line">${order.pickupAddress || 'Не указан'}</span>
                    </div>
                    <div class="order-cell address-container">
                        <span class="address-line">${order.deliveryAddress || 'Не указан'}</span>
                    </div>
                    <div class="order-cell">
                        <span class="cargo-text">${order.cargoDescription || 'Не указан'}</span>
                    </div>
                    <div class="order-cell order-status-cell">
                        <div class="order-status ${statusClass}">
                            <span class="status-icon">●</span>
                            <span>${statusText}</span>
                        </div>
                    </div>
                    <div class="order-cell order-price-cell">
                        <span class="order-price">${order.price ? `${order.price} ₽` : 'Рассчитывается'}</span>
                    </div>
                    <div class="order-cell order-actions-cell">
                        <div class="actions-container">
                            <div class="order-buttons">
                                <button class="view-btn" onclick="viewOrder('${order.id}')">Подробнее</button>
                                <button class="track-btn" onclick="trackOrder('${order.id}')">Отследить</button>
                            </div>
                        </div>
                    </div>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (!ordersTable.querySelector('tbody')) {
                ordersTable.appendChild(tableBody);
            }
        }
        
        // Вспомогательные функции для статусов
        function getStatusClass(status) {
            const statusMap = {
                'new': 'processing',
                'confirmed': 'processing',
                'processing': 'processing',
                'in_transit': 'in-transit',
                'delivered': 'delivered',
                'cancelled': 'cancelled'
            };
            return statusMap[status] || 'processing';
        }
        
        function getStatusText(status) {
            const statusTextMap = {
                'new': 'В обработке',
                'confirmed': 'В обработке',
                'processing': 'В обработке',
                'in_transit': 'В пути',
                'delivered': 'Доставлен',
                'cancelled': 'Отменен'
            };
            return statusTextMap[status] || 'В обработке';
        }
        
        // Функция сброса фильтров в профиле
        function resetProfileFilters() {
            document.getElementById('profile-status-filter').value = 'Все заказы';
            document.getElementById('profile-period-filter').value = 'Все время';
            document.getElementById('profile-search-input').value = '';
            updateProfileOrderStats();
        }
        
        // Функция фильтрации заказов в профиле
        function filterProfileOrders() {
            if (!currentUser) return;
            
            const status = document.getElementById('profile-status-filter').value;
            const period = document.getElementById('profile-period-filter').value;
            const search = document.getElementById('profile-search-input').value.toLowerCase();
            
            // Фильтруем заказы пользователя
            let filteredOrders = orders.filter(order => order.userId === currentUser.id);
            
            // Фильтр по статусу
            if (status && status !== 'Все заказы') {
                if (status === 'В обработке') {
                    // Фильтруем и "new", и "confirmed", и "processing" как "В обработке"
                    filteredOrders = filteredOrders.filter(order => 
                        order.status === 'new' || 
                        order.status === 'confirmed' || 
                        order.status === 'processing'
                    );
                } else {
                    const statusMap = {
                        'В пути': 'in_transit',
                        'Доставлен': 'delivered',
                        'Отменен': 'cancelled'
                    };
                    filteredOrders = filteredOrders.filter(order => order.status === statusMap[status]);
                }
            }
            
            // Фильтр по периоду
            if (period && period !== 'Все время') {
                const now = new Date();
                let startDate = new Date();
                
                switch(period) {
                    case 'За неделю':
                        startDate.setDate(now.getDate() - 7);
                        break;
                    case 'За месяц':
                        startDate.setMonth(now.getMonth() - 1);
                        break;
                    case 'За 3 месяца':
                        startDate.setMonth(now.getMonth() - 3);
                        break;
                    case 'За год':
                        startDate.setFullYear(now.getFullYear() - 1);
                        break;
                }
                
                filteredOrders = filteredOrders.filter(order => {
                    const orderDate = new Date(order.createdAt);
                    return orderDate >= startDate;
                });
            }
            
            // Поиск
            if (search) {
                filteredOrders = filteredOrders.filter(order => 
                    order.id.toString().includes(search) ||
                    (order.pickupAddress && order.pickupAddress.toLowerCase().includes(search)) ||
                    (order.deliveryAddress && order.deliveryAddress.toLowerCase().includes(search)) ||
                    (order.cargoDescription && order.cargoDescription.toLowerCase().includes(search))
                );
            }
            
            if (filteredOrders.length > 0) {
                displayUserOrders(filteredOrders);
                toggleOrdersVisibility(true);
            } else {
                toggleOrdersVisibility(false);
            }
        }
        
        // Обработчик формы профиля
        function handleProfileSubmit(event) {
            event.preventDefault();
            
            if (!currentUser) {
                showNotification('Для изменения профиля необходимо авторизоваться', 'warning');
                return false;
            }
            
            const currentPassword = document.getElementById('profile-current-password').value;
            const newPassword = document.getElementById('profile-new-password').value;
            const confirmPassword = document.getElementById('profile-confirm-password').value;
            
            // Проверка на смену пароля
            if (currentPassword || newPassword || confirmPassword) {
                if (newPassword !== confirmPassword) {
                    showNotification('Новый пароль и подтверждение не совпадают', 'error');
                    return false;
                }
                if (newPassword.length < 6) {
                    showNotification('Новый пароль должен содержать минимум 6 символов', 'error');
                    return false;
                }
                
                // Проверяем текущий пароль
                if (currentPassword !== currentUser.password) {
                    showNotification('Текущий пароль указан неверно', 'error');
                    return false;
                }
                
                // Обновляем пароль пользователя
                currentUser.password = newPassword;
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex].password = newPassword;
                    localStorage.setItem('transportco_users', JSON.stringify(users));
                    localStorage.setItem('transportco_currentUser', JSON.stringify(currentUser));
                }
                
                showNotification('Пароль успешно изменен!', 'success');
                
                // Очищаем поля пароля
                document.getElementById('profile-current-password').value = '';
                document.getElementById('profile-new-password').value = '';
                document.getElementById('profile-confirm-password').value = '';
            }
            
            showNotification('Изменения сохранены!', 'success');
            return false;
        }
        
        // Функция для имитации авторизации
        function loginUser() {
            document.getElementById('unauth-buttons').style.display = 'none';
            document.getElementById('auth-user-buttons').style.display = 'flex';
            
            // Обновляем данные профиля
            if (currentUser) {
                document.getElementById('profile-first-name').value = currentUser.firstName || '';
                document.getElementById('profile-last-name').value = currentUser.lastName || '';
                document.getElementById('profile-email').value = currentUser.email || '';
                document.getElementById('profile-phone').value = currentUser.phone || '';
            }
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('transportco_currentUser');
            document.getElementById('unauth-buttons').style.display = 'flex';
            document.getElementById('auth-user-buttons').style.display = 'none';
            showPage('main');
            showNotification('Вы успешно вышли из системы', 'info');
        }
        
        // Функции для работы с модальными окнами авторизации и регистрации
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        function openRegisterModal() {
            document.getElementById('registerModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeRegisterModal() {
            document.getElementById('registerModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        function switchToRegister() {
            closeLoginModal();
            openRegisterModal();
        }
        
        function switchToLogin() {
            closeRegisterModal();
            openLoginModal();
        }
        
        // Функции для модальных окон регистрации с SMS
        function openConfirmRegisterCodeModal() {
            document.getElementById('confirmRegisterCodeModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            startRegisterTimer();
        }
        
        function closeConfirmRegisterCodeModal() {
            document.getElementById('confirmRegisterCodeModal').classList.remove('active');
            document.body.style.overflow = 'auto';
            resetRegisterTimer();
        }
        
        function backToRegister() {
            closeConfirmRegisterCodeModal();
            openRegisterModal();
        }
        
        // Функция для перемещения между полями ввода кода при регистрации
        function moveToNextRegister(currentIndex, event) {
            const input = event.target;
            const value = input.value;
            
            if (value.length === 1 && currentIndex < 4) {
                document.getElementById(`reg-sms-code-${currentIndex + 1}`).focus();
            }
            
            if (event.inputType === 'deleteContentBackward' && currentIndex > 1 && value.length === 0) {
                document.getElementById(`reg-sms-code-${currentIndex - 1}`).focus();
            }
        }
        
        // Таймер для повторной отправки кода при регистрации
        let registerTimerInterval;
        let registerTimerSeconds = 59;
        
        function startRegisterTimer() {
            clearInterval(registerTimerInterval);
            registerTimerSeconds = 59;
            
            const resendCodeElement = document.getElementById('reg-resend-code');
            resendCodeElement.classList.add('disabled');
            
            registerTimerInterval = setInterval(() => {
                const timerElement = document.getElementById('reg-sms-timer');
                timerElement.textContent = `Пожалуйста подождите... ${registerTimerSeconds} сек`;
                
                if (registerTimerSeconds <= 0) {
                    clearInterval(registerTimerInterval);
                    timerElement.textContent = 'Код не пришел?';
                    resendCodeElement.classList.remove('disabled');
                }
                
                registerTimerSeconds--;
            }, 1000);
        }
        
        function resetRegisterTimer() {
            clearInterval(registerTimerInterval);
            document.getElementById('reg-sms-timer').textContent = 'Пожалуйста подождите... 59 сек';
            document.getElementById('reg-resend-code').classList.add('disabled');
        }
        
        // Функция для повторной отправки кода при регистрации
        function resendRegisterCode() {
            const resendCodeElement = document.getElementById('reg-resend-code');
            
            if (resendCodeElement.classList.contains('disabled')) {
                return;
            }
            
            showNotification('Код отправлен повторно!', 'success');
            startRegisterTimer();
        }
        
        // Функция для проверки введенного кода при регистрации
        function verifyRegisterCode() {
            const code1 = document.getElementById('reg-sms-code-1').value;
            const code2 = document.getElementById('reg-sms-code-2').value;
            const code3 = document.getElementById('reg-sms-code-3').value;
            const code4 = document.getElementById('reg-sms-code-4').value;
            
            const fullCode = code1 + code2 + code3 + code4;
            
            if (fullCode.length !== 4) {
                showNotification('Пожалуйста, введите полный код из 4 цифр', 'warning');
                return;
            }
            
            // Проверяем код (для демо используем "1234")
            if (fullCode === "1234") {
                // Регистрируем пользователя
                if (tempRegistrationData) {
                    const newUser = {
                        id: users.length + 1,
                        email: tempRegistrationData.email,
                        phone: tempRegistrationData.phone,
                        password: tempRegistrationData.password,
                        firstName: tempRegistrationData.firstName,
                        lastName: tempRegistrationData.lastName,
                        verified: true
                    };
                    
                    users.push(newUser);
                    localStorage.setItem('transportco_users', JSON.stringify(users));
                    
                    // Авторизуем пользователя
                    currentUser = newUser;
                    localStorage.setItem('transportco_currentUser', JSON.stringify(currentUser));
                    
                    showNotification('Регистрация подтверждена! Вы успешно зарегистрировались.', 'success');
                    closeConfirmRegisterCodeModal();
                    loginUser();
                    
                    // Переход на запомненную страницу или профиль
                    if (pendingPageAfterLogin) {
                        showPage(pendingPageAfterLogin);
                        pendingPageAfterLogin = null;
                    } else {
                        showPage('profile');
                    }
                } else {
                    showNotification('Ошибка регистрации: данные не найдены', 'error');
                }
            } else {
                showNotification('Неверный код подтверждения. Попробуйте еще раз.', 'error');
            }
        }
        
        // Функции для работы с модальными окнами восстановления пароля
        function openForgotPasswordModal() {
            closeLoginModal();
            document.getElementById('forgotPasswordModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').classList.remove('active');
            document.body.style.overflow = 'auto';
            openLoginModal();
        }
        
        function openConfirmCodeModal() {
            document.getElementById('confirmCodeModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            startTimer();
        }
        
        function closeConfirmCodeModal() {
            document.getElementById('confirmCodeModal').classList.remove('active');
            document.body.style.overflow = 'auto';
            resetTimer();
        }
        
        function backToForgotPassword() {
            closeConfirmCodeModal();
            openForgotPasswordModal();
        }
        
        // Функция для отправки кода восстановления
        function sendRecoveryCode() {
            const contact = document.getElementById('recovery-contact').value;
            
            if (!contact) {
                showNotification('Заполните поле с телефоном или email', 'warning');
                return;
            }
            
            // Проверяем, существует ли пользователь
            const user = users.find(u => u.email === contact || u.phone === contact);
            if (!user) {
                showNotification('Пользователь с указанными данными не найден', 'error');
                return;
            }
            
            showNotification('Код восстановления отправлен!', 'success');
            closeForgotPasswordModal();
            openConfirmCodeModal();
        }
        
        // Функция для перемещения между полями ввода кода
        function moveToNext(currentIndex, event) {
            const input = event.target;
            const value = input.value;
            
            if (value.length === 1 && currentIndex < 4) {
                document.getElementById(`sms-code-${currentIndex + 1}`).focus();
            }
            
            if (event.inputType === 'deleteContentBackward' && currentIndex > 1 && value.length === 0) {
                document.getElementById(`sms-code-${currentIndex - 1}`).focus();
            }
        }
        
        // Таймер для повторной отправки кода
        let timerInterval;
        let timerSeconds = 59;
        
        function startTimer() {
            clearInterval(timerInterval);
            timerSeconds = 59;
            
            const resendCodeElement = document.getElementById('resend-code');
            resendCodeElement.classList.add('disabled');
            
            timerInterval = setInterval(() => {
                const timerElement = document.getElementById('sms-timer');
                timerElement.textContent = `Пожалуйста подождите... ${timerSeconds} сек`;
                
                if (timerSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = 'Код не пришел?';
                    resendCodeElement.classList.remove('disabled');
                }
                
                timerSeconds--;
            }, 1000);
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            document.getElementById('sms-timer').textContent = 'Пожалуйста подождите... 59 сек';
            document.getElementById('resend-code').classList.add('disabled');
        }
        
        // Функция для повторной отправки кода
        function resendCode() {
            const resendCodeElement = document.getElementById('resend-code');
            
            if (resendCodeElement.classList.contains('disabled')) {
                return;
            }
            
            showNotification('Код отправлен повторно!', 'success');
            startTimer();
        }
        
        // Функция для проверки введенного кода
        function verifyCode() {
            const code1 = document.getElementById('sms-code-1').value;
            const code2 = document.getElementById('sms-code-2').value;
            const code3 = document.getElementById('sms-code-3').value;
            const code4 = document.getElementById('sms-code-4').value;
            
            const fullCode = code1 + code2 + code3 + code4;
            
            if (fullCode.length !== 4) {
                showNotification('Пожалуйста, введите полный код из 4 цифр', 'warning');
                return;
            }
            
            const contact = document.getElementById('recovery-contact').value;
            
            // Для демо используем "1234" как правильный код
            if (fullCode === "1234") {
                // Запрашиваем новый пароль
                const newPassword = prompt('Введите новый пароль:');
                
                if (!newPassword || newPassword.length < 6) {
                    showNotification('Пароль должен содержать не менее 6 символов', 'error');
                    return;
                }
                
                // Находим пользователя и обновляем пароль
                const userIndex = users.findIndex(u => u.email === contact || u.phone === contact);
                if (userIndex !== -1) {
                    users[userIndex].password = newPassword;
                    localStorage.setItem('transportco_users', JSON.stringify(users));
                    
                    // Если текущий пользователь - обновляем его данные
                    if (currentUser && (currentUser.email === contact || currentUser.phone === contact)) {
                        currentUser.password = newPassword;
                        localStorage.setItem('transportco_currentUser', JSON.stringify(currentUser));
                    }
                    
                    showNotification('Пароль успешно изменен! Теперь вы можете войти с новым паролем.', 'success');
                    closeConfirmCodeModal();
                    openLoginModal();
                } else {
                    showNotification('Пользователь не найден', 'error');
                }
            } else {
                showNotification('Неверный код подтверждения', 'error');
            }
        }
        
        // Функции для отображения ошибок в формах авторизации/регистрации
        function showError(inputId, message) {
            const input = document.getElementById(inputId);
            const errorElement = document.getElementById(inputId + '-error');
            
            if (input && errorElement) {
                input.classList.add('error');
                errorElement.textContent = message;
                errorElement.classList.add('show');
                errorElement.style.display = 'block';
            }
        }
        
        function clearError(inputId) {
            const input = document.getElementById(inputId);
            const errorElement = document.getElementById(inputId + '-error');
            
            if (input && errorElement) {
                input.classList.remove('error');
                errorElement.textContent = '';
                errorElement.classList.remove('show');
                errorElement.style.display = 'none';
            }
        }
        
        function clearAllErrors() {
            const errorMessages = document.querySelectorAll('.error-message');
            const inputs = document.querySelectorAll('.auth-input');
            
            errorMessages.forEach(error => {
                error.textContent = '';
                error.classList.remove('show');
                error.style.display = 'none';
            });
            
            inputs.forEach(input => {
                input.classList.remove('error');
            });
        }
        
        // Функции для отображения ошибок в форме заказа
        function showOrderError(inputId, message) {
            const input = document.getElementById(inputId);
            const errorElement = document.getElementById(inputId + '-error');
            
            if (input && errorElement) {
                input.classList.add('error');
                errorElement.textContent = message;
                errorElement.classList.add('show');
                errorElement.style.display = 'block';
            }
        }
        
        function clearOrderError(inputId) {
            const input = document.getElementById(inputId);
            const errorElement = document.getElementById(inputId + '-error');
            
            if (input && errorElement) {
                input.classList.remove('error');
                errorElement.textContent = '';
                errorElement.classList.remove('show');
                errorElement.style.display = 'none';
            }
        }
        
        function clearAllOrderErrors() {
            const errorMessages = document.querySelectorAll('.order-error-message');
            const inputs = document.querySelectorAll('#orderForm input, #orderForm textarea, #orderForm select');
            
            errorMessages.forEach(error => {
                error.textContent = '';
                error.classList.remove('show');
                error.style.display = 'none';
            });
            
            inputs.forEach(input => {
                input.classList.remove('error');
            });
        }
        
        // Обработчики форм
        function handleLogin() {
            const login = document.getElementById('auth-login').value;
            const password = document.getElementById('auth-password').value;
            
            clearAllErrors();
            
            let hasError = false;
            
            if (!login) {
                showError('auth-login', 'Заполните это поле');
                hasError = true;
            }
            
            if (!password) {
                showError('auth-password', 'Заполните это поле');
                hasError = true;
            }
            
            if (hasError) {
                return;
            }
            
            // Поиск пользователя
            const user = users.find(u => 
                (u.email === login || u.phone === login) && u.password === password
            );
            
            if (user) {
                if (!user.verified) {
                    showError('auth-login', 'Аккаунт не подтвержден. Проверьте вашу почту или телефон.');
                    showNotification('Аккаунт не подтвержден. Проверьте вашу почту или телефон.', 'warning');
                    return;
                }
                
                currentUser = user;
                localStorage.setItem('transportco_currentUser', JSON.stringify(currentUser));
                showNotification('Вход выполнен успешно!', 'success');
                closeLoginModal();
                loginUser();
                
                // Переход на запомненную страницу или профиль
                if (pendingPageAfterLogin) {
                    showPage(pendingPageAfterLogin);
                    pendingPageAfterLogin = null;
                } else {
                    showPage('profile');
                }
            } else {
                // Проверяем, что именно неверно
                const userExists = users.some(u => u.email === login || u.phone === login);
                if (!userExists) {
                    showError('auth-login', 'Неверный телефон или email'); // ИЗМЕНЕНО: было "Неверный логин"
                    showNotification('Неверный телефон или email', 'error'); // ИЗМЕНЕНО: было "Пользователь с таким логином не найден"
                } else {
                    showError('auth-password', 'Неверный пароль');
                    showNotification('Неверный пароль', 'error');
                }
            }
        }
        
        function handleRegister() {
            const firstName = document.getElementById('reg-firstName').value;
            const lastName = document.getElementById('reg-lastName').value;
            const email = document.getElementById('reg-email').value;
            const phone = document.getElementById('reg-phone').value;
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirmPassword').value;
            const agreeTerms = document.getElementById('reg-agreeTerms').checked;
            
            clearAllErrors();
            
            let hasError = false;
            
            if (!firstName) {
                showError('reg-firstName', 'Заполните это поле');
                hasError = true;
            }
            
            if (!lastName) {
                showError('reg-lastName', 'Заполните это поле');
                hasError = true;
            }
            
            if (!email) {
                showError('reg-email', 'Заполните это поле');
                hasError = true;
            } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showError('reg-email', 'Введите корректный email');
                hasError = true;
            } else if (users.some(u => u.email === email)) {
                showError('reg-email', 'Пользователь с таким email уже существует');
                hasError = true;
            }
            
            if (!phone) {
                showError('reg-phone', 'Заполните это поле');
                hasError = true;
            } else if (users.some(u => u.phone === phone)) {
                showError('reg-phone', 'Пользователь с таким телефоном уже существует');
                hasError = true;
            }
            
            if (!password) {
                showError('reg-password', 'Заполните это поле');
                hasError = true;
            } else if (password.length < 6) {
                showError('reg-password', 'Пароль должен содержать не менее 6 символов');
                hasError = true;
            }
            
            if (!confirmPassword) {
                showError('reg-confirmPassword', 'Заполните это поле');
                hasError = true;
            } else if (password !== confirmPassword) {
                showError('reg-confirmPassword', 'Пароли не совпадают');
                hasError = true;
            }
            
            if (!agreeTerms) {
                showNotification('Необходимо согласиться с условиями использования', 'warning');
                return;
            }
            
            if (hasError) {
                return;
            }
            
            // Сохраняем данные регистрации
            tempRegistrationData = {
                firstName,
                lastName,
                email,
                phone,
                password
            };
            
            showNotification('Регистрация начата! Проверьте SMS для подтверждения.', 'info');
            
            // Закрываем окно регистрации и открываем окно подтверждения SMS
            closeRegisterModal();
            openConfirmRegisterCodeModal();
        }
        
        // Обновленная функция handleOrderSubmit
        function handleOrderSubmit(event) {
            event.preventDefault();
            
            clearAllOrderErrors();
            
            const senderName = document.getElementById('sender-name').value;
            const senderPhone = document.getElementById('sender-phone').value;
            const senderEmail = document.getElementById('sender-email').value;
            const cargoDescription = document.getElementById('cargo-description').value;
            const productCategory = document.getElementById('product-category').value;
            const cargoWeight = document.getElementById('cargo-weight').value;
            const cargoVolume = document.getElementById('cargo-volume').value;
            const cargoType = document.getElementById('cargo-type').value;
            const shippingDate = document.getElementById('shipping-date').value;
            const pickupAddress = document.getElementById('pickup-address').value;
            const deliveryAddress = document.getElementById('delivery-address').value;
            const insurance = document.getElementById('insurance').checked;
            const packaging = document.getElementById('packaging').checked;
            const tracking = document.getElementById('tracking').checked;
            const comments = document.getElementById('comments').value;
            
            let hasError = false;
            
            if (!senderName) {
                showOrderError('sender-name', 'Заполните это поле');
                hasError = true;
            }
            
            if (!senderPhone) {
                showOrderError('sender-phone', 'Заполните это поле');
                hasError = true;
            }
            
            if (!cargoDescription) {
                showOrderError('cargo-description', 'Заполните это поле');
                hasError = true;
            }
            
            if (!productCategory) {
                showOrderError('product-category', 'Выберите категорию товара');
                hasError = true;
            }
            
            if (!cargoWeight || parseFloat(cargoWeight) <= 0) {
                showOrderError('cargo-weight', 'Введите корректный вес');
                hasError = true;
            }
            
            if (!cargoVolume || parseFloat(cargoVolume) <= 0) {
                showOrderError('cargo-volume', 'Введите корректный объем');
                hasError = true;
            }
            
            if (!cargoType) {
                showOrderError('cargo-type', 'Выберите тип груза');
                hasError = true;
            }
            
            if (!shippingDate) {
                showOrderError('shipping-date', 'Выберите дату отправки');
                hasError = true;
            }
            
            if (!pickupAddress) {
                showOrderError('pickup-address', 'Заполните это поле');
                hasError = true;
            }
            
            if (!deliveryAddress) {
                showOrderError('delivery-address', 'Заполните это поле');
                hasError = true;
            }
            
            if (hasError) {
                showNotification('Пожалуйста, заполните все обязательные поля корректно', 'warning');
                return false;
            }
            
            const orderData = {
                id: orders.length + 1,
                userId: currentUser ? currentUser.id : null,
                senderName,
                senderPhone,
                senderEmail,
                cargoDescription,
                productCategory,
                cargoWeight: parseFloat(cargoWeight),
                cargoVolume: parseFloat(cargoVolume),
                cargoType,
                shippingDate,
                pickupAddress,
                deliveryAddress,
                insurance,
                packaging,
                tracking,
                comments,
                status: 'new',
                price: Math.round(parseFloat(cargoWeight) * 100 + parseFloat(cargoVolume) * 500 + (insurance ? -0.05 : 0) + (packaging ? 2000 : 0)),
                createdAt: new Date().toISOString()
            };
            
            orders.push(orderData);
            localStorage.setItem('transportco_orders', JSON.stringify(orders));
            
            showNotification('Заказ успешно оформлен! Наш менеджер свяжется с вами в течение 30 минут.', 'success');
            
            // Сбрасываем форму
            document.getElementById('orderForm').reset();
            
            // Если пользователь авторизован, показываем профиль и переходим на вкладку заказов
            if (currentUser) {
                showPage('profile');
                showProfileTab('orders'); // Переходим на вкладку заказов
                updateProfileOrderStats(); // Обновляем статистику и таблицу
            } else {
                showPage('main');
            }
            
            return false;
        }
        
        function handleContactSubmit(event) {
            event.preventDefault();
            
            const contactData = {
                name: document.getElementById('contact-name').value,
                email: document.getElementById('contact-email').value,
                phone: document.getElementById('contact-phone').value,
                message: document.getElementById('contact-message').value
            };
            
            showNotification('Сообщение успешно отправлено! Мы ответим вам в ближайшее время.', 'success');
            document.getElementById('contactForm').reset();
            
            return false;
        }
        
        // Функции для страницы "Мои заказы" в профиле
        function toggleOrdersVisibility(hasOrders) {
            const ordersTable = document.getElementById('profile-orders-table');
            const noOrdersMessage = document.getElementById('profile-no-orders-message');
            
            if (hasOrders) {
                if (ordersTable) ordersTable.style.display = 'block';
                if (noOrdersMessage) noOrdersMessage.style.display = 'none';
            } else {
                if (ordersTable) ordersTable.style.display = 'none';
                if (noOrdersMessage) noOrdersMessage.style.display = 'block';
            }
        }
        
        function viewOrder(orderId) {
            showNotification(`Просмотр заказа ${orderId}`, 'info');
        }
        
        function trackOrder(orderId) {
            showNotification(`Отслеживание заказа ${orderId}`, 'info');
        }
        
        // Закрытие модальных окон при клике вне их
        document.addEventListener('click', function(event) {
            const modals = ['loginModal', 'registerModal', 'forgotPasswordModal', 'confirmCodeModal', 'confirmRegisterCodeModal'];
            
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    if (modalId === 'loginModal') closeLoginModal();
                    if (modalId === 'registerModal') closeRegisterModal();
                    if (modalId === 'forgotPasswordModal') closeForgotPasswordModal();
                    if (modalId === 'confirmCodeModal') closeConfirmCodeModal();
                    if (modalId === 'confirmRegisterCodeModal') closeConfirmRegisterCodeModal();
                }
            });
        });
        
        // Закрытие модальных окон при нажатии Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeLoginModal();
                closeRegisterModal();
                closeForgotPasswordModal();
                closeConfirmCodeModal();
                closeConfirmRegisterCodeModal();
            }
        });
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Установить сегодняшнюю дату в поле даты отправки
            const today = new Date().toISOString().split('T')[0];
            const shippingDate = document.getElementById('shipping-date');
            if (shippingDate) {
                shippingDate.min = today;
            }
            
            // Проверяем авторизацию при загрузке
            if (currentUser) {
                loginUser();
            }
            
            // По умолчанию показываем сообщение об отсутствии заказов
            toggleOrdersVisibility(false);
            
            // Добавляем обработчики фильтров заказов
            const statusFilter = document.getElementById('profile-status-filter');
            const periodFilter = document.getElementById('profile-period-filter');
            const searchInput = document.getElementById('profile-search-input');
            
            if (statusFilter) {
                statusFilter.addEventListener('change', filterProfileOrders);
            }
            if (periodFilter) {
                periodFilter.addEventListener('change', filterProfileOrders);
            }
            if (searchInput) {
                searchInput.addEventListener('input', filterProfileOrders);
            }
        });
    </script>
</body>
</html>